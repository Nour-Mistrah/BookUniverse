const books = [
    {
        id: "TroubleIsland",
        title: "Trouble Island",
        image: "images/troubleisland.jpg",
        author: "Sharon Short",
        description: `
        <p>Many miles from anywhere in the middle of Lake Erie, Trouble Island serves as a stop-off for gangsters as they run between America and Canada. The remote isle is also the permanent home to two women: Aurelia Escalante, who serves as a maid to Rosita, lady of the mansion and wife to the notorious prohibition gangster, Eddie McGee. In the freezing winter of 1932, the women anticipate the arrival of Eddie and his strange coterie: his right-hand man, a doctor, a cousin, a famous actor, and a rival gangster who Rosita believes murdered their only son.</p>
        <p>Aurelia wants nothing more than to escape Trouble Island, but she is hiding a secret of her own. She is in fact not a maid, but a gangster’s wife in hiding, as she runs from the murder she committed five years ago. Her friend Rosita took her in under this guise, but it has become clear that Rosita wants to keep Aurelia right where she is.</p>
        <p>Shortly after the group of criminals, celebrities, and scoundrels arrive, Rosita suddenly disappears. Aurelia plans her getaway, going to the shore to retrieve her box of hidden treasures, but instead finds Rosita’s body in the water. Someone has made sure Aurelia was the one to find her. An ice storm makes unexpected landfall, cutting Trouble Island off from both mainlands, and with more than one murderer among them.</p>
        <p>Both a gripping locked room mystery, and a transporting, evocative portrait of a woman in crisis, Trouble Island marks the enthralling standalone suspense debut from Sharon Short, promising to be her breakout novel, inspired by a real island in Lake Erie, and true events from her own rich family history.</p>
        `
    },

    {
        id: "Raised",
        title: "Raised by a Serial Killer: Discovering the Truth About My Father",
        image: "images/raisedByaKiller.jpg",
        author: "April Balascio",
        description: `
        <p>The untold story behind the hit true crime podcast The Clearing, this unforgettable memoir traces one daughter’s moving quest to understand her larger-than-life childhood as she searches for the truth about her father, the serial killer Edward Wayne Edwards.</p>
        <p>One evening in 2009, April Balascio was searching online, as she had been every night, for unsolved murders in the towns her family had lived growing up, when she stumbled across the latest investigations into the “Sweetheart Murders” cold case. All at once, the buried memories of her father’s dark history were awakened, and she knew she had to take action. She picked up the phone to call a detective and the rest is infamous true crime history.</p>
        <p>In her unflinching memoir, Balascio bravely reveals an astonishing tale of a lifetime of manipulation, unexplained upheavals, and silent fear. Some part of her had always known what her father was capable of, but the full truth of how she came to these revelations is as riveting as it is quietly terrifying. Through searing storytelling, dedicated research, and intimate insight, Raised by a Serial Killer is a gripping, courageous memoir unlike any other.</p>
        `
    },
    {
        id: "AfterTheOcean",
        title: "After the Ocean",
        image: "images/aftertheocean.jpg",
        author: "Lauren E. Rico",
        description: `
        <p>A painful unsolved mystery resurfaces after decades of confusion in this emotional story about inter-generational trauma, family, and the beauty of Puerto Rico.</p>
        <p>Thirty years ago young music student Emilia Oliveras married Paul, her dream man. Their Caribbean honeymoon cruise was idyllic—until the night he disappeared from their ship, presumed drowned. Reeling from the loss, Emilia was horrified when Paul's wealthy, vindictive family tried to railroad her as a gold-digging murderer. She escaped home to Puerto Rico and then across the country, where she became Emily Oliver, suburban wife and mother of two. Still, the trauma and secrets of her past ruined her second marriage, and created a disconnect with, and between, her grown daughters. But now a mysterious phone call suggests Paul is alive and well. </p>
        `
    },
    {
        id: "LiveHere",
        title: "We Used to Live Here",
        image: "images/weusedtolivehere.jpg",
        author: "Marcus Kliewer",
        description: `
        <p>Get Out meets Parasite in this eerily haunting debut and Reddit hit—soon to be a Netflix original movie starring Blake Lively—about two homeowners whose lives are turned upside down when the house’s previous residents unexpectedly visit.</p>
        <p>As a young, queer couple who flip houses, Charlie and Eve can’t believe the killer deal they’ve just gotten on an old house in a picturesque neighborhood. As they’re working in the house one day, there’s a knock on the door. A man stands there with his family, claiming to have lived there years before and asking if it would be alright if he showed his kids around. People pleaser to a fault, Eve lets them in.</p>
        <p>As soon as the strangers enter their home, uncanny and inexplicable things start happening, including the family’s youngest child going missing and a ghostly presence materializing in the basement. Even more weird, the family can’t seem to take the hint that their visit should be over. And when Charlie suddenly vanishes, Eve slowly loses her grip on reality. Something is terribly wrong with the house and with the visiting family—or is Eve just imagining things?</p>
        `
    },
    {
        id: "NuclearWar",
        title: "Nuclear War: A Scenario",
        image: "images/nuclearwar.jpg",
        author: "Annie Jacobsen",
        description: `
        <p>There is only one scenario other than an asteroid strike that could end the world as we know it in a matter of hours: nuclear war. And one of the triggers for that war would be a nuclear missile inbound toward the United States.</p>
        <p>Every generation, a journalist has looked deep into the heart of the nuclear military establishment: the technologies, the safeguards, the plans, and the risks. These investigations are vital to how we understand the world we really live in—where one nuclear missile will beget one in return, and where the choreography of the world’s end requires massive decisions made on seconds’ notice with information that is only as good as the intelligence we have.</p>
        <p>Pulitzer Prize finalist Annie Jacobsen’s Nuclear War: A Scenario explores this ticking-clock scenario, based on dozens of exclusive new interviews with military and civilian experts who have built the weapons, have been privy to the response plans, and have been responsible for those decisions should they have needed to be made. Nuclear War: A Scenario examines the handful of minutes after a nuclear missile launch. It is essential reading, and unlike any other book in its depth and urgency.</p>
        `
    },
    {
        id: "Cold",
        title: "Cold Crematorium: Reporting from the Land of Auschwitz",
        image: "images/coldcrematorium.jpg",
        author: "CJózsef Debreczeni",
        description: `
            <p>The first English language edition of a lost memoir by an Auschwitz survivor, offering a shocking and deeply moving perspective on life within the camps.</p>
            <p>When József Debreczeni, a prolific Hungarian-language journalist and poet, arrived in Auschwitz in 1944, his life expectancy was forty-five minutes. This was how long it took for the half-dead prisoners to be sorted into groups, stripped, and sent to the gas chambers. He beat the odds and survived the “selection,” which led to twelve horrifying months of incarceration and slave labor in a series of camps, ending in the “Cold Crematorium”—the so-called hospital of the forced labor camp Dörnhau, where prisoners too weak to work awaited execution. But as Soviet and Allied troops closed in on the camps, local Nazi commanders—anxious about the possible consequences of outright murder—decided to leave the remaining prisoners to die.</p>
            <p>Debreczeni survived the liberation of Auschwitz and immediately recorded his experiences in Cold Crematorium, one of the harshest, most merciless indictments of Nazism ever written. This haunting memoir, rendered in the precise and unsentimental prose of an accomplished journalist, is an eyewitness account of incomparable literary quality. It was published in the Hungarian language in 1950, but it was never translated, due to Cold War hostilities and rising antisemitism. More than 70 years later, this masterpiece that was nearly lost to time is now being published in more than 15 different languages for the first time, and will finally take its rightful place among the greatest works of Holocaust literature.</p>
        `
    },
    {
        id: "Quran",
        title: "The Holly Quran",
        image: "images/holyquraan.jpg",
        author: "Allah, the Glorious and Majestic",
        description: `
        <p>The Holy Qur'an (also known as The Koran) is the sacred book of Islam. It is the word of God whose truth was revealed to the Prophet Muhammad through the angel Gabriel over a period of 23 years. As it was revealed, so it was committed to memory by his companions, though written copies were also made by literate believers during the lifetime of the Prophet. The first full compilation was by Abu Bakar, the first Caliph, and it was then recompiled in the original dialect by the third Caliph Uthman, after the best reciters had fallen in battle. Muslims believe that the truths of The Holy Qur'an are fully and authentically revealed only in the original classical Arabic. However, as the influence of Islam grows and spreads to the modern world, it is recognised that translation is an important element in introducing and explaining Islam to a wider audience.</p>
        `
    },
    {
        id: "IslamicThoughts",
        title: "Fundamentals of Islamic Thought : God, Man, and the Universe",
        image: "images/FundamentalsOfIslamic.jpg",
        author: "Sheikh Morteza Motahhari",
        description: `
        <p>Ayatullah Murtaza Mutahhari, assassinated in May 1979, soon after the triumph of a revolution he had donemuch to promote both intellectually and organizationally, was one of the most versatile and prolific of Iranian religious scholars in recent times. His work is marked by a philosophical clarity that particularly qualifies him to deal with the fundamental problems of religious thought that form the subject of this book.</p>
        <p>The first essay, "Man and Faith," describes the distinctive characteristics of man as an order of creation and establishes his lasting need for both science and faith as complementary means of understanding the universe. Then comes an examination of a key concept of Islam, "The World-View of Tauhid," including some of its implications for the structure of the universe as well as for society and culture. The third essay deals with the nature of the Islamic philosophical tradition from which Mutahhari's thought is derived. The collection is completed by three shorter pieces in which Mutahhari demonstrates his awareness of Western as well as Islamic thought and offers fresh views on several fundamental issues religious conern.</p>
        `
    },
    {
        id: "OurPhilosophy",
        title: "Our Philosophy",
        image: "images/ourphilosophy.jpg",
        author: "Sayyid Muhammad Baqir as-Sadr",
        description: `
        <p>Our Philosophy explores fundamental ideas about the world and our understanding of it. Divided into two main investigations, the first examines the rational method of thought, emphasizing that reason and prior knowledge are the foundation of true understanding. It argues that all scientific and philosophical thought must align with this rational criterion, with experience serving only as a tool to apply this logic.</p>
        <p>The second investigation delves into philosophical perspectives, exploring conflicting notions, dialectical ideologies (especially from Hegel and Marx), the principle of causality, and the relationship between matter and God. It also tackles the philosophical problem of knowledge, examining its conflict with materialism and metaphysics through a comprehensive lens of various scientific fields.</p>
        <p>This book invites readers to engage thoughtfully with these critical philosophical questions, encouraging an objective and reflective approach. It is not merely a theoretical exploration but a guide to understanding the deeper problems facing humanity.</p>
        `
    },
    {
        id: "TheColorOfLaw",
        title: "The Color of Law: A Forgotten History of How Our Government Segregated America",
        image: "images/thecoloroflaw.jpg",
        author: "Richard Rothstein",
        description: `
        <p>In this groundbreaking history of the modern American metropolis, Richard Rothstein, a leading authority on housing policy, explodes the myth that America’s cities came to be racially divided through de facto segregation—that is, through individual prejudices, income differences, or the actions of private institutions like banks and real estate agencies. Rather, The Color of Law incontrovertibly makes clear that it was de jure segregation—the laws and policy decisions passed by local, state, and federal governments—that actually promoted the discriminatory patterns that continue to this day.</p>
        <p>Through extraordinary revelations and extensive research that Ta-Nehisi Coates has lauded as "brilliant" (The Atlantic), Rothstein comes to chronicle nothing less than an untold story that begins in the 1920s, showing how this process of de jure segregation began with explicit racial zoning, as millions of African Americans moved in a great historical migration from the south to the north.</p>
        <p>As Jane Jacobs established in her classic The Death and Life of Great American Cities, it was the deeply flawed urban planning of the 1950s that created many of the impoverished neighborhoods we know. Now, Rothstein expands our understanding of this history, showing how government policies led to the creation of officially segregated public housing and the demolition of previously integrated neighborhoods. While urban areas rapidly deteriorated, the great American suburbanization of the post–World War II years was spurred on by federal subsidies for builders on the condition that no homes be sold to African Americans. Finally, Rothstein shows how police and prosecutors brutally upheld these standards by supporting violent resistance to black families in white neighborhoods.</p>
        `
    },
    {
        id: "IslamicPolitical",
        title: "Islamic Political Theory",
        image: "images/islampolitcaltheory.jpg",
        author: "Sheikh Muhammad Taqi Misbah Yazdi",
        description: `
        <p>The first of two volumes of the renowned and comprehensive text on Islamic political theory by Ayatullah Misbah Yazdi, dealing with the importance of recognizing Islam as the basis of any just political theory, methods of implementing such a theory by the government, and comparing and contrasting this Islamic system with the system predominant in most Western ans secular nations.</p>
        `
    },
    {
        id: "TheRepublic",
        title: "The Republic",
        image: "images/therepublic.jpg",
        author: "Plato, Desmond Lee",
        description: `
        <p>Presented in the form of a dialogue between Socrates and three different interlocutors, this classic text is an enquiry into the notion of a perfect community and the ideal individual within it. During the conversation, other questions are raised: what is goodness?; what is reality?; and what is knowledge? The Republic also addresses the purpose of education and the role of both women and men as guardians of the people. With remarkable lucidity and deft use of allegory, Plato arrives at a depiction of a state bound by harmony and ruled by philosopher kings.</p>
        `
    },
    {
        id: "ChipWar",
        title: "Chip War: The Fight for the World's Most Critical Technology",
        image: "images/chipwar.jpg",
        author: "Chris Miller",
        description: `
        <p>You may be surprised to learn that microchips are the new oil—the scarce resource on which the modern world depends. Today, military, economic, and geopolitical power are built on a foundation of computer chips. Virtually everything— from missiles to microwaves, smartphones to the stock market — runs on chips. Until recently, America designed and built the fastest chips and maintained its lead as the #1 superpower. Now, America's edge is slipping, undermined by competitors in Taiwan, Korea, Europe, and, above all, China. Today, as Chip War reveals, China, which spends more money each year importing chips than it spends importing oil, is pouring billions into a chip-building initiative to catch up to the US. At stake is America's military superiority and economic prosperity.</p>
        <p>Economic historian Chris Miller explains how the semiconductor came to play a critical role in modern life and how the U.S. become dominant in chip design and manufacturing and applied this technology to military systems. America's victory in the Cold War and its global military dominance stems from its ability to harness computing power more effectively than any other power. But here, too, China is catching up, with its chip-building ambitions and military modernization going hand in hand. America has let key components of the chip-building process slip out of its grasp, contributing not only to a worldwide chip shortage but also a new Cold War with a superpower adversary that is desperate to bridge the gap.</p>
        <p>Illuminating, timely, and fascinating, Chip War shows that, to make sense of the current state of politics, economics, and technology, we must first understand the vital role played by chips.</p>
        `
    },
    {
        id: "DesignPatterns",
        title: "Design Patterns: Elements of Reusable Object-Oriented Software",
        image: "images/designpattern.jpg",
        author: "Erich Gamma, Grady Booch, Richard Helm, Ralph Johnson, John Vlissides",
        description: `
        <p>Capturing a wealth of experience about the design of object-oriented software, four top-notch designers present a catalog of simple and succinct solutions to commonly occurring design problems. Previously undocumented, these 23 patterns allow designers to create more flexible, elegant, and ultimately reusable designs without having to rediscover the design solutions themselves.</p>
        <p>The authors begin by describing what patterns are and how they can help you design object-oriented software. They then go on to systematically name, explain, evaluate, and catalog recurring designs in object-oriented systems. With Design Patterns as your guide, you will learn how these important patterns fit into the software development process, and how you can leverage them to solve your own design problems most efficiently.Each pattern describes the circumstances in which it is applicable, when it can be applied in view of other design constraints, and the consequences and trade-offs of using the pattern within a larger design. All patterns are compiled from real systems and are based on real-world examples. Each pattern also includes code that demonstrates how it may be implemented in object-oriented programming languages like C++ or Smalltalk.</p>   
        `
    },
    {
        id: "ThePragmaticProgrammer",
        title: "The Pragmatic Programmer: Your Journey to Mastery",
        image: "images/thepragmatic.jpg",
        author: "Dave Thomas, Andy Hunt, Ward Cunningham",
        description: `
        <p>Straight from the trenches, The Pragmatic Programmer, 20th Anniversary Edition cuts through the increasing specialization and technicalities of modern software development to examine the core process: transforming a requirement into working, maintainable code that delights users. Extensively updated with ten new sections and major revisions throughout, this edition covers topics ranging from career development to architectural techniques for keeping code flexible, adaptable, and reusable.</p>
        <p>Organized into self-contained sections -- and filled with compelling anecdotes, examples, and analogies -- The Pragmatic Programmer illustrates today's best practices and major pitfalls of many different aspects of software development. Wherever possible, the authors abstract away specific technologies, focusing on insights you can apply no matter what tools or languages you use -- or will use.</p>
        <p>Whether you're a new coder, an experienced programmer, or a manager responsible for software projects, applying this guide's lessons will help you rapidly improve your productivity, quality, and job satisfaction. You'll learn skills and develop habits and attitudes that form the foundation for long-term success in your career. You'll become a Pragmatic Programmer.</p>
        `
    }
];

function getBookId() {
    const params = new URLSearchParams(window.location.search);
    const bookId = params.get('id');
    console.log(`Book ID from URL: ${bookId}`);
    return bookId;
}


function displayBookDetails(bookId) {
    const book = books.find(b => b.id === bookId);
    if (book) {
        const bookDetailsDiv = document.getElementById('book-details');
        console.log(`Book found:`, book);
        bookDetailsDiv.innerHTML = `
            <div class="book_container">
                <div class="left-section">
                    <div class="buttons-container">
                        <img src="${book.image}" alt="${book.title}">
                        <a href="./pdfs/${book.id}.pdf" class="btn_download" download="${book.id}.pdf">Read Offline</a>
                        <span class="heart-icon fa fa-heart-o" id="heart-icon"></span>
                    </div>
                    <div id="star-container">
                        <i class="fa fa-star" id="star1"></i>
                        <i class="fa fa-star" id="star2"></i>
                        <i class="fa fa-star" id="star3"></i>
                        <i class="fa fa-star" id="star4"></i>
                        <i class="fa fa-star" id="star5"></i>
                    </div>
                </div>
                <div class="right-section">
                    <h1 class="book-title">${book.title}</h1>
                    <p id="authorsName">By ${book.author}</p>
                    <p class="book-description">${book.description}</p>
                </div>
            </div>
        `;
    } else {
        document.getElementById('book-details').innerHTML = '<p>Book not found.</p>';
    }
}

document.addEventListener('DOMContentLoaded', () => {
    const bookId = getBookId();
    if (bookId) {
        displayBookDetails(bookId);
    }
});


const stars = document.querySelectorAll('#star-container .fa');
let currentRating = 0;
stars.forEach(star => star.classList.remove('checked'));
stars.forEach((star, index) => {
    star.addEventListener('click', () => {
        if (currentRating === index + 1) {
            currentRating = 0;
            stars.forEach(s => s.classList.remove('checked'));
        } else {
            currentRating = index + 1;
            stars.forEach(s => s.classList.remove('checked'));
            for (let i = 0; i < currentRating; i++) {
                stars[i].classList.add('checked');
            }
        }
    });
});


const heartIcon = document.getElementById('heart-icon');
if (heartIcon) {
    heartIcon.addEventListener('click', () => {
        heartIcon.classList.toggle('active');
        heartIcon.classList.toggle('fa-heart');
        heartIcon.classList.toggle('fa-heart-o');
    });
}



function getQueryParam(param) {
    const params = new URLSearchParams(window.location.search);
    return params.get(param);
}


function displayBooks(query) {
    const bookListContainer = document.getElementById('book-list');
    const filteredBooks = books.filter(book =>
        book.title.toLowerCase().includes(query.toLowerCase()) ||
        book.author.toLowerCase().includes(query.toLowerCase())
    );


    bookListContainer.innerHTML = '';

    if (filteredBooks.length > 0) {
        filteredBooks.forEach(book => {
            const bookItem = document.createElement('div');
            bookItem.classList.add('book_container');
            bookItem.innerHTML = `
                <div class="left-section">
                    <div class="buttons-container">
                        <img src="${book.image}" alt="${book.title}">
                        <a href="./pdfs/${book.id}.pdf" class="btn_download" download="${book.id}.pdf">Download</a>
                        <span class="heart-icon fa fa-heart-o" id="heart-icon"></span>
                    </div>
                    <div id="star-container">
                        <i class="fa fa-star" id="star1"></i>
                        <i class="fa fa-star" id="star2"></i>
                        <i class="fa fa-star" id="star3"></i>
                        <i class="fa fa-star" id="star4"></i>
                        <i class="fa fa-star" id="star5"></i>
                    </div>
                </div>
                <div class="right-section">
                    <h1 class="book-title">${book.title}</h1>
                    <p id="authorsName">By ${book.author}</p>
                    <p class="book-description">${book.description}</p>
                </div>
            `;
            bookListContainer.appendChild(bookItem);
        });
    } else {
        bookListContainer.innerHTML = '<p>No results found.</p>';
    }
}



document.addEventListener('DOMContentLoaded', () => {
    const query = getQueryParam('query');
    if (query) {
        displayBooks(query);
    }
});
document.addEventListener('DOMContentLoaded', () => {

    const bookId = getBookId();
    if (bookId) {
        displayBookDetails(bookId);
    }


    const addToReadButton = document.getElementById('add-to-read');
    if (addToReadButton) {
        addToReadButton.addEventListener('click', () => {
            addToPreviouslyRead(bookId);
        });
    }
});


function addToPreviouslyRead(bookId) {
    const book = books.find(b => b.id === bookId);
    if (book) {
        let previouslyReadBooks = JSON.parse(localStorage.getItem('previouslyReadBooks')) || [];
        if (!previouslyReadBooks.some(b => b.id === bookId)) {
            previouslyReadBooks.push(book);
            localStorage.setItem('previouslyReadBooks', JSON.stringify(previouslyReadBooks));
            alert(`${book.title} has been added to your Previously Read list.`);
        } else {
            alert(`${book.title} is already in your Previously Read list.`);
        }
    } else {
        alert("Book not found.");
    }
}




document.addEventListener('DOMContentLoaded', () => {
    const bookId = getBookId();
    if (bookId) {
        displayBookDetails(bookId);
    }
    const startReadingButton = document.getElementById('start-reading');
    if (startReadingButton) {
        startReadingButton.addEventListener('click', () => {
            addToCurrentlyReading(bookId);
        });
    }
});

function addToCurrentlyReading(bookId) {
    const book = books.find(b => b.id === bookId);
    if (book) {
        let currentlyReadingBooks = JSON.parse(localStorage.getItem('currentlyReadingBooks')) || [];
        if (!currentlyReadingBooks.some(b => b.id === bookId)) {
            currentlyReadingBooks.push(book);
            localStorage.setItem('currentlyReadingBooks', JSON.stringify(currentlyReadingBooks));

            alert(`${book.title} has been added to your Currently Reading list.`);
        } else {
            alert(`${book.title} is already in your Currently Reading list.`);
        }
    } else {
        alert("Book not found.");
    }
}


document.addEventListener('DOMContentLoaded', () => {
    const bookId = getBookId();
    if (bookId) {
        displayBookDetails(bookId);
    }
    const addToReadingGoalsButton = document.getElementById('add-to-reading-goals');
    if (addToReadingGoalsButton) {
        addToReadingGoalsButton.addEventListener('click', () => {
            addToReadingGoals(bookId);
        });
    }
});


function addToReadingGoals(bookId) {
    const book = books.find(b => b.id === bookId);
    if (book) {
        let readingGoalsBooks = JSON.parse(localStorage.getItem('readingGoalsBooks')) || [];
        if (!readingGoalsBooks.some(b => b.id === bookId)) {
            readingGoalsBooks.push(book);
            localStorage.setItem('readingGoalsBooks', JSON.stringify(readingGoalsBooks));

            alert(`${book.title} has been added to your Reading Goals.`);
        } else {
            alert(`${book.title} is already in your Reading Goals.`);
        }
    } else {
        alert("Book not found.");
    }
}

const bookId = getBookId();
if (bookId) {
    displayBookDetails(bookId);
}
